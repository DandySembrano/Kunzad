@{
    Layout = "~/Views/Shared/_DataTableLayout3.cshtml";
}

<!-- Shipping Line List/DataTable -->
@section tableContent{
    <div class="row">
        <div class="col-lg-12">
            <div ui-grid="shippingLineGridOptions" class="grid" ui-grid-resize-columns ui-grid-move-columns ui-grid-exporter></div><br />
        </div>
    </div>
}
<!-- Shipping Line/General Form -->
@section tab1Content{
    <div class="row" ng-show="selectedTab === tabPages[0]">
        <div class="alert alert-danger alert-sm" ng-show="isError">
            <i class="fa fa-remove pr10"></i>
            <strong>ERROR!</strong>    {{errorMessage}}
        </div>
        <div class="col-lg-6">
            <form class="form-horizontal" role="form">
                <div class="form-group form-group-sm">
                    <label class="col-md-3 control-label small">Name</label>
                    <div class="col-md-8">
                        <input type="text"
                               class="form-control"
                               placeholder=""
                               ng-model="shippingLineItem.Name"
                               ng-disabled="viewOnly"
                               pattern=".{0,150}"
                               ng-change="initializeHeaderName()">
                    </div>
                </div>
            </form>
        </div>
    </div>
}

<!-- Vessel Form-->
@section tab2Content{
    <div class="row" ng-show="selectedTab === tabPages[1] ">
        <div class="col-lg-12">
            <div class="row">
                <div class="padding-right-30">
                    <button class="btn btn-sm pull-right" ng-click="openVesselForm('Create')">
                        <span class="glyphicon glyphicon-plus"></span>
                    </button>
                </div>
            </div><br />
            <div ui-grid="vesselGridOptions" class="grid" ui-grid-resize-columns ui-grid-move-columns ui-grid-exporter></div><br />
            <br />
            <!--Pagination Buttons-->
            <div class="myTableContainter" ng-show="paginatedVessels.length > 0">
                <div class="myTableContent">
                    <div class="myTableRow-no-border text-right">
                        <div class="btn-group btn-group-sm">
                            <div class="myTableCell-no-padding text-right small">
                                <button class="btn btn-primary btn-sm"
                                        type="button"
                                        ng-click="processVesselPagination(vesselCurrentPage = (vesselCurrentPage - 1), '')"
                                        ng-disabled="!previousPageVessels">
                                    Previous
                                </button>
                            </div>
                            <div class="myTableCell-no-padding text-right small">
                                <button class="btn btn-default btn-sm"
                                        type="button"
                                        ng-disabled="true">
                                    {{ vesselCurrentPage }}
                                </button>
                            </div>
                            <div class="myTableCell-no-padding text-right small">
                                <button class="btn btn-primary btn-sm"
                                        type="button"
                                        ng-click="processVesselPagination(vesselCurrentPage = (vesselCurrentPage + 1), '')"
                                        ng-disabled="!nextPageVessels">
                                    Next
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}

<!-- Voyage Form-->
@section tab3Content{
    <div class="row" ng-show="selectedTab === tabPages[2]">
        <div class="col-lg-12">
            <div class="row">
                <div class="padding-right-30">
                    <button class="btn btn-sm pull-right" ng-click="openVoyageForm('Create')">
                        <span class="glyphicon glyphicon-plus"></span>
                    </button>
                </div>
                <div class="myTableCell-10 text-dark" style="font-size: 20px; padding-left:30px">
                    {{vesselNameHolder}}
                </div>
            </div><br />
            <div ui-grid="voyageGridOptions" class="grid" ui-grid-resize-columns ui-grid-move-columns ui-grid-exporter></div><br />
            <br />
            <!--Pagination Buttons-->
            <div class="myTableContainter" ng-show="voyageGridOptions.data.length > 0">
                <div class="myTableContent">
                    <div class="myTableRow-no-border text-right">
                        <div class="btn-group btn-group-sm">
                            <div class="myTableCell-no-padding text-right small">
                                <button class="btn btn-primary btn-sm"
                                        type="button"
                                        ng-click="processVoyagePagination(voyageCurrentPage = (voyageCurrentPage - 1), '')"
                                        ng-disabled="!previousPageVoyage">
                                    Previous
                                </button>
                            </div>
                            <div class="myTableCell-no-padding text-right small">
                                <button class="btn btn-default btn-sm"
                                        type="button"
                                        ng-disabled="true">
                                    {{ voyageCurrentPage }}
                                </button>
                            </div>
                            <div class="myTableCell-no-padding text-right small">
                                <button class="btn btn-primary btn-sm"
                                        type="button"
                                        ng-click="processVoyagePagination(voyageCurrentPage = (voyageCurrentPage + 1), '')"
                                        ng-disabled="!nextPageVoyage">
                                    Next
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
}
<!-- Vessel Context Menu Content -->
@RenderPage("~/Views/Shared/_ContextMenuVessel.cshtml")

<!-- Voyage Context Menu Content -->
@RenderPage("~/Views/Shared/_ContextMenuVoyage.cshtml")

<!-- Modal for Vessel -->
<div id="modal-panel-vessel" class="popup-basic bg-none mfp-with-anim mfp-hide">
    <!-- begin: .panel -->
    <div class="panel">
        <div class="panel-heading">
            <span class="panel-title"><i class="glyphicon glyphicon-tasks"></i>{{vesselAction}} Vessel</span>
        </div>
        <!-- end .panel-heading section -->
        <!-- Panel Body -->
        <div class="panel-body">
            <div class="alert alert-danger alert-sm" ng-show="isErrorVessel">
                <i class="fa fa-remove pr10"></i>
                <strong>ERROR!</strong>    {{errorMessageVessel}}
            </div>

            <div class="row">
                <div class="col-lg-12">
                    <form class="form-horizontal" role="form">
                        <div class="form-group form-group-sm">
                            <label class="col-md-3 control-label small">Name</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control"
                                       ng-model="vesselItem.Name" ng-disabled="viewOnly" pattern=".{0,150}">
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!-- Panel Footer -->
        <div class="panel-footer text-right">
            <button class="btn btn-primary" type="submit"
                    ng-click="saveVessel(vesselAction)">
                {{vesselAction === 'Delete' ? 'Delete' : vesselAction === 'Create' ? 'Create' : vesselAction === 'Edit' ? 'Edit' : 'Close'}}
            </button>
        </div>
    </div>
    <!-- end: .panel -->
</div>
<!-- end: .admin-form -->
<!-- Modal for Voyage -->
<div id="modal-panel-voyage" class="popup-basic bg-none mfp-with-anim mfp-hide" style="max-width: 700px">
    <!-- begin: .panel -->
    <div class="panel">
        <div class="panel-heading">
            <span class="panel-title"><i class="glyphicon glyphicon-tasks"></i>{{voyageAction}} Voyage</span>
        </div>
        <!-- end .panel-heading section -->
        <!-- Panel Body -->
        <div class="panel-body">
            <div class="alert alert-danger alert-sm" ng-show="isErrorVoyage">
                <i class="fa fa-remove pr10"></i>
                <strong>ERROR!</strong>    {{errorMessageVoyage}}
            </div>
            <div class="container">
                <form class="form-horizontal" role="form">
                    <div class="row">
                        <div class="col-md-4">
                            <div class="form-group form-group-sm">
                                <label class="col-md-3 control-label small text-right">Number</label>
                                <div class="col-md-8 text-left">
                                    <input type="text" class="form-control"
                                           ng-model="voyageItem.VoyageNo"
                                           pattern=".{0,20}"
                                           ng-disabled="viewOnly">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group form-group-sm">
                            <label class="col-md-3 control-label small text-left">Business Unit</label>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group form-group-sm">
                                <label class="col-md-3 control-label small text-right">Origin</label>
                                <div class="col-md-8">
                                    <select class="form-control" placeholder="" ng-disabled="viewOnly"
                                            ng-change="selectBusinessUnit(voyageItem.OriginBusinessUnitId, 'origin')"
                                            ng-model="voyageItem.OriginBusinessUnitId" ng-options="item.Id as item.Name for item in businesUnits"></select>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group form-group-sm">
                                <label class="col-md-3 control-label small text-right">Destination</label>
                                <div class="col-md-8">
                                    <select class="form-control" placeholder="" ng-disabled="viewOnly"
                                            ng-change="selectBusinessUnit(voyageItem.DestinationBusinessUnitId, 'destination')"
                                            ng-model="voyageItem.DestinationBusinessUnitId" ng-options="item.Id as item.Name for item in businesUnits"></select>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group form-group-sm">
                            <label class="col-md-4 control-label small text-left">Estimated Departure</label>
                            <label class="col-md-4 control-label small text-left">Estimated Arrival</label>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group form-group-sm">
                                <label class="col-md-3 control-label small text-right">Date/Time</label>
                                <div class="col-md-8">
                                    <div class='input-group date'>
                                        <input type='text' id='edd' class="form-control" ng-model="edd" ng-disabled=" viewonly" />
                                        <span class="input-group-addon" title="Close" style="padding:2px 0px 2px 10px;">
                                            <span class=" glyphicon glyphicon-remove-circle"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group form-group-sm">
                                <label class="col-md-3 control-label small text-right">Date/Time</label>
                                <div class="col-md-8">
                                    <div class='input-group date'>
                                        <input type='text' id='ead' class="form-control" ng-model="ead" ng-disabled=" viewonly" />
                                        <span class="input-group-addon" title="Close" style="padding:2px 0px 2px 10px;">
                                            <span class=" glyphicon glyphicon-remove-circle"></span>
                                        </span>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="form-group form-group-sm">
                            <label class="col-md-4 control-label small text-left">Departure</label>
                            <label class="col-md-4 control-label small text-left">Arrival</label>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group form-group-sm">
                                <label class="col-md-3 control-label small text-right">Date/Time</label>
                                <div class="col-md-8">
                                    <div class='input-group date'>
                                        <input type='text' id='dd' class="form-control" ng-model="dd" ng-disabled=" viewonly" />
                                        <span class="input-group-addon" title="Close" style="padding:2px 0px 2px 10px;">
                                            <span class=" glyphicon glyphicon-remove-circle"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="form-group form-group-sm">
                                <label class="col-md-3 control-label small text-right">Date/Time</label>
                                <div class="col-md-8">
                                    <div class='input-group date'>
                                        <input type='text' id='ad' class="form-control" ng-model="ad" ng-disabled=" viewonly" />
                                        <span class="input-group-addon" title="Close" style="padding:2px 0px 2px 10px;">
                                            <span class=" glyphicon glyphicon-remove-circle"></span>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <script type="text/javascript">
                        $(function () {
                            $('#edd').datetimepicker({
                                format: 'MM-DD-YYYY HH:mm:ss',
                                sideBySide: true,
                                minDate: moment()
                            })
                            $('#ead').datetimepicker({
                                format: 'MM-DD-YYYY HH:mm:ss',
                                sideBySide: true,
                                minDate: moment()
                            })
                            $('#dd').datetimepicker({
                                format: 'MM-DD-YYYY HH:mm:ss',
                                sideBySide: true,
                                minDate: moment()
                            })
                            $('#ad').datetimepicker({
                                format: 'MM-DD-YYYY HH:mm:ss',
                                sideBySide: true,
                                minDate: moment()
                            })
                            //time format
                            //$('#edt').datetimepicker({
                            //    pickDate: false,
                            //});
                        });
                    </script>
                </form>
            </div>
        </div>
        <!-- Panel Footer -->
        <div class="panel-footer text-right">
            <button class="btn btn-primary" type="submit"
                    ng-click="saveVoyage(voyageAction)">
                {{voyageAction === 'Delete' ? 'Delete' : voyageAction === 'Create' ? 'Create' : voyageAction === 'Edit' ? 'Edit' : 'Close'}}
            </button>
        </div>
    </div>
    <!-- end: .panel -->
</div>
<!-- end: .admin-form -->

<!--Deletion Confirmation modal-->
<div id="modal-panel-confirmation" class="popup-basic bg-none mfp-with-anim mfp-hide">
    <div class="panel">
        <!--Modal Header-->
        <div class="panel-heading">
            <span class="panel-title"><i class="glyphicon glyphicon-tasks"></i>Delete Shipping Line {{dataItem.Name}}</span>
        </div>
        <!--Modal Body-->
        <div class="panel-body">
            <div class="row">
                <div class="col-lg-12">
                    <div class="form-group form-group-sm">
                        <label class="col-md-12 control-label text-dark">
                            Are you sure you want to delete this record
                            together with its ({{vesselGridOptions.data.length}}) vessels and its corresponding vessel voyages?
                        </label>
                    </div>
                </div>
            </div>
        </div>
        <!-- Panel Footer -->
        <div class="panel-footer text-right">
            <button class="btn btn-primary" type="submit" ng-click="apiDelete(shippingLineItem.Id); closeModalForm()">Delete</button>
            <button class="btn" type="submit" ng-click="closeModalForm()">Cancel</button>
        </div>
    </div>
</div>
<!--end of modal-->