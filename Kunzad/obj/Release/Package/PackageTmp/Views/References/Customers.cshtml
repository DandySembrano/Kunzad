@{
    Layout = "~/Views/Shared/_DataTableCustomer.cshtml";
}

<!-- Customer List/DataTable -->
@section tableContent{
    <div context-menu="" data-target="DTCustGeneral">
        <div ui-grid="gridOptions1" ui-grid-exporter class="grid"></div>
    </div>
}

<!-- Customer Form -->
@section tab1Content{
    <div class="row" ng-show="selectedTab === tabPages[0]">
        <div class="col-lg-6">
            <div class="alert alert-danger alert-sm" ng-show="isError">
                <i class="fa fa-remove pr10"></i>
                <strong>ERROR!</strong>    {{errorMessage}}
            </div>
            <form class="form-horizontal" role="form">
                <div class="form-group form-group-sm">
                    <label class="col-md-3 control-label small">Code</label>
                    <div class="col-md-4">
                        <input type="text" class="form-control" placeholder=""
                               ng-model="dataItem.Code" ng-disabled="viewOnly">
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="col-md-3 control-label small">Name</label>
                    <div class="col-md-8">
                        <input type="text" class="form-control" placeholder=""
                               ng-model="dataItem.Name" ng-disabled="viewOnly">
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="col-md-3 control-label small">Customer Group</label>
                    <div class="col-md-8">
                        <select class="form-control" placeholder="" ng-disabled="viewOnly"
                                ng-change="selectCustomerGroup(dataItem.CustomerGroupId)"
                                ng-model="dataItem.CustomerGroupId" ng-options="cg.Id as cg.Name for cg in CustomerGroups"></select>
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="col-md-3 control-label small">Industry</label>
                    <div class="col-md-8">
                        <select class="form-control" placeholder="" ng-disabled="viewOnly"
                                ng-change="selectIndustry(dataItem.IndustryId)"
                                ng-model="dataItem.IndustryId" ng-options="item.Id as item.Name for item in Industries"></select>
                    </div>
                </div>

                <div class="form-group form-group-sm">
                    <label class="col-md-3 control-label small">TIN</label>
                    <div class="col-md-8">
                        <input type="text" class="form-control" placeholder=""
                               ng-model="dataItem.TIN" ng-disabled="viewOnly">
                    </div>
                </div>

            </form>
        </div>
    </div>
}

<!-- Customer Addresses -->
@section tab2Content{
    <div ng-show="selectedTab === tabPages[1]">
        <div context-menu="" data-target="DTCustAdresss">
            <button class="btn btn-sm pull-right" ng-click="actionFormAddress('Create')">
                <span class="glyphicon glyphicon-plus">
                </span>
            </button>
            <br />
            <br />
            <div ui-grid="gridOptions2" ui-grid-exporter class="grid"></div>
        </div>
    </div>
}

<!-- Contacts -->
@section tab3Content{
    <div class="row" ng-show="selectedTab === tabPages[2]">
        <div context-menu="" data-target="DTCustContact">
            <button class="btn btn-sm pull-right" ng-click="actionFormContact('Create')">
                <span class=" glyphicon glyphicon-plus">
                </span>
            </button>
            <br />
            <br />
            <div ui-grid="gridOptionsContact" ui-grid-exporter class="grid"></div>
        </div>
    </div>
}

<!-- This is the template use for City/Municpality Typeahead -->
<script type="text/ng-template" id="customTemplate.html">
    <a>
        <span bind-html-unsafe="match.label | typeaheadHighlight:query"></span>
        <span>, {{match.model.StateProvinceName + ", " + match.model.CountryName}}</span>
    </a>
</script>

<!-- Admin Form Popup for Customer Address -->
<div id="modal-panel-address" class="popup-basic bg-none mfp-with-anim mfp-hide">
    <div class="panel">
        <div class="panel-heading">
            <span class="panel-title"><i class="glyphicon glyphicon-tasks"></i>{{customerAddressAction}} Customer Address</span>
        </div>
        <div class="panel-body">
            <div class="alert alert-danger alert-sm" ng-show="isError">
                <i class="fa fa-remove pr10"></i>
                <strong>ERROR!</strong>    {{errorMessage}}
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <form class="form-horizontal" role="form">

                        <div class="form-group form-group-sm">
                            <label class="col-md-3 control-label small">Street Address</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" placeholder="Street address line 1"
                                       ng-model="customerAddress.Line1" ng-disabled="viewOnly">
                            </div>
                        </div>

                        <div class="form-group form-group-sm">
                            <label class="col-md-3 control-label small"></label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" placeholder="Street address line 2"
                                       ng-model="customerAddress.Line2" ng-disabled="viewOnly">
                            </div>
                        </div>

                        <div class="form-group form-group-sm">
                            <label class="col-md-3 control-label small">City/Municipality</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" placeholder="" ng-disabled="viewOnly"
                                       ng-model="customerAddress.CityMunicipality.Name" typeahead-editable="false"
                                       typeahead-on-select="onSelectCity($item, $model, $label)"
                                       typeahead="city.Name for city in cityMunicipalities | filter:$viewValue | limitTo:12"
                                       typeahead-template-url="customTemplate.html">
                            </div>
                        </div>

                        <div class="form-group form-group-sm">
                            <label class="col-md-3 control-label small">Province/State</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" placeholder=""
                                       ng-model="customerAddress.CityMunicipality.StateProvince.Name" ng-disabled="true">
                            </div>
                        </div>

                        <div class="form-group form-group-sm">
                            <label class="col-md-3 control-label small">Postal Code</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" placeholder=""
                                       ng-model="customerAddress.PostalCode" ng-disabled="viewOnly">
                            </div>
                        </div>

                        <div class="form-group form-group-sm">
                            <label class="col-md-3 control-label small">Country</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" placeholder=""
                                       ng-model="country.Name" ng-disabled="true">
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="checkbox-custom mb5">
                                <input id="checkbox1" type="checkbox" ng-model="customerAddress.IsPickupAddress">
                                <label for="checkbox1" class="small">Pickup Address</label>
                            </div>

                            <div class="checkbox-custom mb5">
                                <input id="checkbox2" type="checkbox" ng-model="customerAddress.IsDeliveryAddress">
                                <label for="checkbox2" class="small">Delivery Address</label>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="checkbox-custom mb5">
                                <input id="checkbox3" type="checkbox" ng-model="customerAddress.IsBillingAddress">
                                <label for="checkbox3" class="small">Billing Address{{customerAddress.IsBillingAddress}}</label>
                            </div>
                        </div>
                    </form>
                </div>

            </div>
        </div>
        <div class="panel-footer text-right">
            <button class="btn btn-primary" type="submit"
                    ng-click="saveCustomerAddress(customerAddressAction)">
                {{customerAddressAction === 'Create' ? 'Add' : customerAddressAction}}
            </button>

        </div>
    </div>
</div>

<!--panel for contact phone-->
<div id="modal-panel-contactphone" class="popup-basic bg-none mfp-with-anim mfp-hide">
    <div class="panel">
        <div class="panel-heading">
            <span class="panel-title"><i class="glyphicon glyphicon-tasks"></i>{{customerAddressAction}} Customer Contact</span>
        </div>
        <div class="panel-body">
            <div class="alert alert-danger alert-sm" ng-show="isError">
                <i class="fa fa-remove pr10"></i>
                <strong>ERROR!</strong>    {{errorMessage}}
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <form class="form-horizontal" role="form">
                        <div class="form-group form-group-sm">
                            <label class="col-md-3 control-label small">Name</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" placeholder="Name"
                                       ng-model="contact.Name" ng-disabled="viewOnly">
                            </div>
                        </div>

                        <div class="form-group form-group-sm">
                            <label class="col-md-3 control-label small">Title</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" placeholder="Title"
                                       ng-model="contact.Title" ng-disabled="viewOnly">
                            </div>
                        </div>

                        <div class="form-group form-group-sm">
                            <label class="col-md-3 control-label small">Email</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" placeholder="Email"
                                       ng-model="contact.Email" ng-disabled="viewOnly">
                            </div>
                        </div>

                        <div class="form-group form-group-sm">
                            <label class="col-md-3 control-label small">Alternate Email</label>
                            <div class="col-md-8">
                                <input type="text" class="form-control" placeholder="Alternate Email"
                                       ng-model="contact.AlternateEmail" ng-disabled="viewOnly">
                            </div>
                        </div>
                    </form>
                </div>
                <button class="btn btn-sm pull-right" ng-click="actionFormContactPhone('Create',0)">
                    <span class=" glyphicon glyphicon-plus">
                    </span>
                </button>
                <br />
                <br />

                <div class="col-lg-12">
                    <span class="panel-title">
                        <span class="glyphicons glyphicons-table"></span>
                        Contact Phone
                    </span>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th class="col-md-5"><strong>Contact Number</strong></th>
                                <th class="col-md-5 "><strong>Type</strong></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>

                            <tr ng-repeat="c in customerContactPhoneList"
                                ng-click="setSelectedContactPhone($index)">
                                <td><input class="col-md-pull-10" type="text" ng-model="c.ContactNumber" ng-disabled="viewOnly" /></td>
                                <td>
                                    <select class="col-md-pull-10" placeholder="" ng-disabled="viewOnly"
                                            ng-change="selectContactType(c.ContactNumberTypeId)"
                                            ng-model="c.ContactNumberTypeId" ng-options="cg.Id as cg.Type for cg in CustomerContactTypes"></select>
                                </td>
                                <td>
                                    <button class="btn btn-sm pull-right" ng-click="actionFormContactPhone('Delete',$index)">
                                        <span class="glyphicons glyphicons-circle_minus"></span>
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
        <div class="panel-footer text-right">
            <button class="btn btn-primary" type="submit"
                    ng-click="saveCustomerContact(customerContactAction)">
                {{customerContactAction === 'Create' ? 'Add' : customerContactAction}}
            </button>

        </div>
    </div>
</div>

<!-- Admin Form Popup -->
<div id="modal-panel" class="popup-basic bg-none mfp-with-anim mfp-hide">
    <!-- begin: .panel -->
    <div class="panel">
        <div class="panel-heading">
            <span class="panel-title"><i class="glyphicon glyphicon-tasks"></i>{{actionMode + " " + modelName}}</span>
        </div>
        <!-- end .panel-heading section -->
        <!-- Panel Body -->
        <div class="panel-body">
            <div class="alert alert-danger alert-sm" ng-show="isError">
                <i class="fa fa-remove pr10"></i>
                <strong>ERROR!</strong>    {{errorMessage}}
            </div>
        </div>
        <!-- Panel Footer -->
        <div class="panel-footer text-right">
            <button class="btn btn-primary" type="submit" ng-click="submit()">{{submitButtonText}}</button>
        </div>
    </div>
    <!-- end: .panel -->
</div>
<!-- end: .admin-form -->

